{
  "title": "PLACEHOLDER SHADOW DOM RULES",
  "date": "2023-04-12T00:00:00.000Z",
  "tags": [
    "adobe launch",
    "click tracking",
    "javascript",
    "web components"
  ],
  "draft": false,
  "summary": "How to add click tracking to modern web components",
  "body": {
    "raw": "\n## The good ole DOM\n\nThe DOM used to be a reliable place. Every element on you page could be found within it.\nThose days are fading thanks to modern [web components](https://developer.mozilla.org/en-US/docs/Web/Web_Components) and their concept of a [shadow DOM](https://developer.mozilla.org/en-US/docs/Web/Web_Components/Using_shadow_DOM).\nNot to be confused with the [shadow realm](https://www.urbandictionary.com/define.php?term=Shadow+Realm). This is not a bad thing of course,\nbut does represent a problem for tag managers like Launch that rely on the regular DOM to add event listeners to elements to trigger rules.\nWeb components and the shadow dom are actually easier to explain with a bit of code and some visuals.\n\n![red and blue button](https://images.ctfassets.net/on47yk52ubpi/EFtfZyGfMsSXbUhem7Vvo/f16a8adb99ae736bf817cc5d41e3783c/Screenshot_2023-04-09_at_5.57.38_PM.png)\n\n<figure>\n  <figcaption>\n    The red button is a regular element, and the blue button is a web component that is encapsulated\n    in the shadow dom.\n  </figcaption>\n</figure>\n\n![shadow dom html](https://images.ctfassets.net/on47yk52ubpi/7EUzVCDq1zRssQC4cPyng9/dea0adbdcb0d98b095a052fb8699334b/Screenshot_2023-04-09_at_8.37.17_PM.png)\n\n<figure>\n  <figcaption>\n    \"shadow root (open)\" signifies that this element is a web component that lives in the shadow\n    dom. It cannot be accessed via regular document.querySelector\n  </figcaption>\n</figure>\n\nHere is the code for the page above. Note that the blue button is a custom defined HTML element known as a web component\n\n```html\n<!DOCTYPE html>\n<html>\n  <head>\n    <title>Buttons</title>\n    <style>\n      .button {\n        width: 200px;\n        height: 200px;\n        border: none;\n        color: white;\n        font-size: 16px;\n        font-weight: bold;\n        text-align: center;\n        line-height: 100px;\n        cursor: pointer;\n        margin: 10px;\n      }\n\n      .regular {\n        background-color: red;\n      }\n    </style>\n  </head>\n  <body>\n    <button id=\"redButton\" class=\"button regular\">Regular DOM Element</button>\n\n    <script>\n      // This is a web component\n      class ShadowButton extends HTMLElement {\n        constructor() {\n          super()\n          const shadow = this.attachShadow({ mode: 'open' })\n\n          const button = document.createElement('button')\n          button.setAttribute('id', 'blueButton')\n          button.setAttribute('class', 'button shadow')\n          button.setAttribute(\n            'style',\n            'width: 200px; height: 200px; border: none; color: white; font-size: 16px; font-weight: bold; text-align: center; line-height: 100px; cursor: pointer; margin: 10px;background-color:blue'\n          )\n          button.textContent = 'Shadow DOM Element'\n\n          shadow.appendChild(button)\n        }\n      }\n\n      // Register the web component\n      customElements.define('shadow-button', ShadowButton)\n    </script>\n\n    <shadow-button class=\"button shadow\"></shadow-button>\n  </body>\n</html>\n```\n\nEverything renders and looks normal, but the issue occurs when you try to select these elements from the DOM.\n\n![shadow dom null](https://images.ctfassets.net/on47yk52ubpi/5o3ghfRg5zP7dUKeaurWwS/598bfa2ed296802764d11220d6fa5f56/Screenshot_2023-04-09_at_6.01.39_PM.png)\n\n<figure>\n  <figcaption>The blue shadow dom button cannot be found...</figcaption>\n</figure>\n\n---\n\n## Where does this manifest in Launch?\n\nI usually run across it when trying to add click tracking to these web components.\nJust adding a regular Launch click tracking trigger to a rule doesn't work. For example:\n\n![blue button rule](https://images.ctfassets.net/on47yk52ubpi/1nV1Rgvt2cfP15h2DV68Tv/1cafb4916f1b4a7961ce1f7c1d695430/Screenshot_2023-04-12_at_2.50.50_PM.png)\n![red button rule](https://images.ctfassets.net/on47yk52ubpi/6FHE1xLqp5FJgujk02uvHV/f6831c504ec1e3a920331f737dbaddc4/Screenshot_2023-04-12_at_2.58.41_PM.png)\n![button rule gifs](https://images.ctfassets.net/on47yk52ubpi/3XcB8JcbV60AfgVTCd3gC7/aa0abdb36005733122ef43be7222c0bf/buttonfires.gif)\n\n<figure>\n  <figcaption>The blue button rule, she no work :(</figcaption>\n</figure>\n\n---\n\n## Workarounds\n\nSo there isn't really an out of the box solution for this in Launch. Maybe someone should make an extension ðŸ¤”\nAnyway, I really only see 2 options:\n\n- Build a direct call event or datalayer push into the code that builds the web component\n- In Launch custom code, write some custom code that reaches into the shadow root and adds direct call/datalayer push\n\nIf anyone knows an out of the box solution - please reach out!\n\n## Integrating into the web component\n\nAlthough web compoents are special as mentioned above, they are still just regular HTML & JS and thus can\nhave event listeners added to them. Because of this, you can bake a direct call or data layer push event right\ninto an event listener. If I wanted to track clicks on the blue button for example:\n\n```javascript\n// ...\nbutton.addEventListener('click', () =>\n  _satellite.track('shadow element click!!!', { extra: 'data' })\n)\nshadow.appendChild(button)\n```\n\n![irect call rule](https://images.ctfassets.net/on47yk52ubpi/3kolQkxUBmc40YnjYkeSdf/da855cad428f61d079de34e518e27183/bluebuttondirectcall.gif)\n\n<figure>\n  <figcaption>I didn't set up a direct call rule, but you get the point, it works</figcaption>\n</figure>\n\n**or**\n\n```javascript\n// ...\nbutton.addEventListener('click', () =>\n  datalayer.push({ event: 'shadow element click', extra: 'data' })\n)\nshadow.appendChild(button)\n```\n\n![data layer push](https://images.ctfassets.net/on47yk52ubpi/16vlVePf6QBBgPJqaGtEHJ/99b13a20d58d30c44af3f1ab76f0a320/datalayerpush.gif)\n\n<figure>\n  <figcaption>\n    I don't have a data layer extension setup on this fake site, but again, you see where I am going\n    with this\n  </figcaption>\n</figure>\n\nThere is also the option of adding ADDING YOUR OWN EVENT LISTERN IN CUSTOM CODE!!!!\n\nSo that is how you can add tracking to a shadow root element in the shadow dom. In this case, I added click\ntracking via an event listener, but if you can write it in Javascript event listener, you can communicate it to Launch. For example,\nif I wanted to track impressions of the blue button, I could add an intersection observer and fire off direct calls/data layer pushes.\nIts all about identifying the shadow root element correct.\n\n```javascript\n// Create a new shadow root element\n// const element = document.createElement('div');\n//const shadowRoot = element.attachShadow({ mode: 'open' });\n\n// Create a new Intersection Observer object and observe the shadow root element\nconst observer = new IntersectionObserver(\n  (entries) => {\n    // Handle intersection changes here\n    if (entry.isIntersecting) {\n      // Fire the custom event on the observed element\n      entry.target.dispatchEvent(customEvent)\n    }\n  },\n  { root: shadowRoot }\n)\n\n// Observe a child element of the shadow root element\nconst targetElement = shadowRoot.querySelector('.target')\nobserver.observe(targetElement)\n```\n\nIMPRESSION TRACKING IMAGE RULE IN LAUNCH\nIMPRESSION TRAKCING RULE FIRING\n",
    "code": "var Component=(()=>{var p=Object.create;var l=Object.defineProperty;var d=Object.getOwnPropertyDescriptor;var h=Object.getOwnPropertyNames;var m=Object.getPrototypeOf,u=Object.prototype.hasOwnProperty;var N=(a,s)=>()=>(s||a((s={exports:{}}).exports,s),s.exports),k=(a,s)=>{for(var c in s)l(a,c,{get:s[c],enumerable:!0})},o=(a,s,c,e)=>{if(s&&typeof s==\"object\"||typeof s==\"function\")for(let t of h(s))!u.call(a,t)&&t!==c&&l(a,t,{get:()=>s[t],enumerable:!(e=d(s,t))||e.enumerable});return a};var g=(a,s,c)=>(c=a!=null?p(m(a)):{},o(s||!a||!a.__esModule?l(c,\"default\",{value:a,enumerable:!0}):c,a)),b=a=>o(l({},\"__esModule\",{value:!0}),a);var r=N((x,i)=>{i.exports=_jsx_runtime});var v={};k(v,{default:()=>w,frontmatter:()=>f});var n=g(r()),f={title:\"PLACEHOLDER SHADOW DOM RULES\",date:\"2023-04-12\",tags:[\"adobe launch\",\"click tracking\",\"javascript\",\"web components\"],draft:!1,summary:\"How to add click tracking to modern web components\"};function y(a={}){let{wrapper:s}=a.components||{};return s?(0,n.jsx)(s,Object.assign({},a,{children:(0,n.jsx)(c,{})})):c();function c(){let e=Object.assign({h2:\"h2\",a:\"a\",span:\"span\",p:\"p\",img:\"img\",pre:\"pre\",code:\"code\",hr:\"hr\",ul:\"ul\",li:\"li\",strong:\"strong\"},a.components);return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)(e.h2,{id:\"the-good-ole-dom\",children:[(0,n.jsx)(e.a,{href:\"#the-good-ole-dom\",\"aria-hidden\":\"true\",tabIndex:\"-1\",children:(0,n.jsx)(e.span,{className:\"icon icon-link\"})}),\"The good ole DOM\"]}),(0,n.jsxs)(e.p,{children:[\"The DOM used to be a reliable place. Every element on you page could be found within it. Those days are fading thanks to modern \",(0,n.jsx)(e.a,{href:\"https://developer.mozilla.org/en-US/docs/Web/Web_Components\",children:\"web components\"}),\" and their concept of a \",(0,n.jsx)(e.a,{href:\"https://developer.mozilla.org/en-US/docs/Web/Web_Components/Using_shadow_DOM\",children:\"shadow DOM\"}),\". Not to be confused with the \",(0,n.jsx)(e.a,{href:\"https://www.urbandictionary.com/define.php?term=Shadow+Realm\",children:\"shadow realm\"}),\". This is not a bad thing of course, but does represent a problem for tag managers like Launch that rely on the regular DOM to add event listeners to elements to trigger rules. Web components and the shadow dom are actually easier to explain with a bit of code and some visuals.\"]}),(0,n.jsx)(e.p,{children:(0,n.jsx)(e.img,{alt:\"red and blue button\",src:\"https://images.ctfassets.net/on47yk52ubpi/EFtfZyGfMsSXbUhem7Vvo/f16a8adb99ae736bf817cc5d41e3783c/Screenshot_2023-04-09_at_5.57.38_PM.png\"})}),(0,n.jsx)(\"figure\",{children:(0,n.jsx)(\"figcaption\",{children:(0,n.jsx)(e.p,{children:\"The red button is a regular element, and the blue button is a web component that is encapsulated in the shadow dom.\"})})}),(0,n.jsx)(e.p,{children:(0,n.jsx)(e.img,{alt:\"shadow dom html\",src:\"https://images.ctfassets.net/on47yk52ubpi/7EUzVCDq1zRssQC4cPyng9/dea0adbdcb0d98b095a052fb8699334b/Screenshot_2023-04-09_at_8.37.17_PM.png\"})}),(0,n.jsx)(\"figure\",{children:(0,n.jsx)(\"figcaption\",{children:(0,n.jsx)(e.p,{children:'\"shadow root (open)\" signifies that this element is a web component that lives in the shadow dom. It cannot be accessed via regular document.querySelector'})})}),(0,n.jsx)(e.p,{children:\"Here is the code for the page above. Note that the blue button is a custom defined HTML element known as a web component\"}),(0,n.jsx)(e.pre,{className:\"language-html\",children:(0,n.jsxs)(e.code,{className:\"code-highlight language-html\",children:[(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsxs)(e.span,{className:\"token doctype\",children:[(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"<!\"}),(0,n.jsx)(e.span,{className:\"token doctype-tag\",children:\"DOCTYPE\"}),\" \",(0,n.jsx)(e.span,{className:\"token name\",children:\"html\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\">\"})]}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsxs)(e.span,{className:\"token tag\",children:[(0,n.jsxs)(e.span,{className:\"token tag\",children:[(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"<\"}),\"html\"]}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\">\"})]}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"  \",(0,n.jsxs)(e.span,{className:\"token tag\",children:[(0,n.jsxs)(e.span,{className:\"token tag\",children:[(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"<\"}),\"head\"]}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\">\"})]}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"    \",(0,n.jsxs)(e.span,{className:\"token tag\",children:[(0,n.jsxs)(e.span,{className:\"token tag\",children:[(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"<\"}),\"title\"]}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\">\"})]}),\"Buttons\",(0,n.jsxs)(e.span,{className:\"token tag\",children:[(0,n.jsxs)(e.span,{className:\"token tag\",children:[(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"</\"}),\"title\"]}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\">\"})]}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"    \",(0,n.jsxs)(e.span,{className:\"token tag\",children:[(0,n.jsxs)(e.span,{className:\"token tag\",children:[(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"<\"}),\"style\"]}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\">\"})]}),(0,n.jsx)(e.span,{className:\"token style\",children:(0,n.jsx)(e.span,{className:\"token language-css\",children:`\n`})})]}),(0,n.jsx)(e.span,{className:\"code-line\",children:(0,n.jsx)(e.span,{className:\"token style\",children:(0,n.jsxs)(e.span,{className:\"token language-css\",children:[\"      \",(0,n.jsx)(e.span,{className:\"token selector\",children:(0,n.jsx)(e.span,{className:\"token class\",children:\".button\"})}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),`\n`]})})}),(0,n.jsx)(e.span,{className:\"code-line\",children:(0,n.jsx)(e.span,{className:\"token style\",children:(0,n.jsxs)(e.span,{className:\"token language-css\",children:[\"        \",(0,n.jsx)(e.span,{className:\"token property\",children:\"width\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\":\"}),\" \",(0,n.jsx)(e.span,{className:\"token number\",children:\"200\"}),(0,n.jsx)(e.span,{className:\"token unit\",children:\"px\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\";\"}),`\n`]})})}),(0,n.jsx)(e.span,{className:\"code-line\",children:(0,n.jsx)(e.span,{className:\"token style\",children:(0,n.jsxs)(e.span,{className:\"token language-css\",children:[\"        \",(0,n.jsx)(e.span,{className:\"token property\",children:\"height\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\":\"}),\" \",(0,n.jsx)(e.span,{className:\"token number\",children:\"200\"}),(0,n.jsx)(e.span,{className:\"token unit\",children:\"px\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\";\"}),`\n`]})})}),(0,n.jsx)(e.span,{className:\"code-line\",children:(0,n.jsx)(e.span,{className:\"token style\",children:(0,n.jsxs)(e.span,{className:\"token language-css\",children:[\"        \",(0,n.jsx)(e.span,{className:\"token property\",children:\"border\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\":\"}),\" none\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\";\"}),`\n`]})})}),(0,n.jsx)(e.span,{className:\"code-line\",children:(0,n.jsx)(e.span,{className:\"token style\",children:(0,n.jsxs)(e.span,{className:\"token language-css\",children:[\"        \",(0,n.jsx)(e.span,{className:\"token property\",children:\"color\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\":\"}),\" \",(0,n.jsx)(e.span,{className:\"token color\",children:\"white\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\";\"}),`\n`]})})}),(0,n.jsx)(e.span,{className:\"code-line\",children:(0,n.jsx)(e.span,{className:\"token style\",children:(0,n.jsxs)(e.span,{className:\"token language-css\",children:[\"        \",(0,n.jsx)(e.span,{className:\"token property\",children:\"font-size\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\":\"}),\" \",(0,n.jsx)(e.span,{className:\"token number\",children:\"16\"}),(0,n.jsx)(e.span,{className:\"token unit\",children:\"px\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\";\"}),`\n`]})})}),(0,n.jsx)(e.span,{className:\"code-line\",children:(0,n.jsx)(e.span,{className:\"token style\",children:(0,n.jsxs)(e.span,{className:\"token language-css\",children:[\"        \",(0,n.jsx)(e.span,{className:\"token property\",children:\"font-weight\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\":\"}),\" bold\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\";\"}),`\n`]})})}),(0,n.jsx)(e.span,{className:\"code-line\",children:(0,n.jsx)(e.span,{className:\"token style\",children:(0,n.jsxs)(e.span,{className:\"token language-css\",children:[\"        \",(0,n.jsx)(e.span,{className:\"token property\",children:\"text-align\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\":\"}),\" center\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\";\"}),`\n`]})})}),(0,n.jsx)(e.span,{className:\"code-line\",children:(0,n.jsx)(e.span,{className:\"token style\",children:(0,n.jsxs)(e.span,{className:\"token language-css\",children:[\"        \",(0,n.jsx)(e.span,{className:\"token property\",children:\"line-height\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\":\"}),\" \",(0,n.jsx)(e.span,{className:\"token number\",children:\"100\"}),(0,n.jsx)(e.span,{className:\"token unit\",children:\"px\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\";\"}),`\n`]})})}),(0,n.jsx)(e.span,{className:\"code-line\",children:(0,n.jsx)(e.span,{className:\"token style\",children:(0,n.jsxs)(e.span,{className:\"token language-css\",children:[\"        \",(0,n.jsx)(e.span,{className:\"token property\",children:\"cursor\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\":\"}),\" pointer\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\";\"}),`\n`]})})}),(0,n.jsx)(e.span,{className:\"code-line\",children:(0,n.jsx)(e.span,{className:\"token style\",children:(0,n.jsxs)(e.span,{className:\"token language-css\",children:[\"        \",(0,n.jsx)(e.span,{className:\"token property\",children:\"margin\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\":\"}),\" \",(0,n.jsx)(e.span,{className:\"token number\",children:\"10\"}),(0,n.jsx)(e.span,{className:\"token unit\",children:\"px\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\";\"}),`\n`]})})}),(0,n.jsx)(e.span,{className:\"code-line\",children:(0,n.jsx)(e.span,{className:\"token style\",children:(0,n.jsxs)(e.span,{className:\"token language-css\",children:[\"      \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"}),`\n`]})})}),(0,n.jsx)(e.span,{className:\"code-line\",children:(0,n.jsx)(e.span,{className:\"token style\",children:(0,n.jsx)(e.span,{className:\"token language-css\",children:`\n`})})}),(0,n.jsx)(e.span,{className:\"code-line\",children:(0,n.jsx)(e.span,{className:\"token style\",children:(0,n.jsxs)(e.span,{className:\"token language-css\",children:[\"      \",(0,n.jsx)(e.span,{className:\"token selector\",children:(0,n.jsx)(e.span,{className:\"token class\",children:\".regular\"})}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),`\n`]})})}),(0,n.jsx)(e.span,{className:\"code-line\",children:(0,n.jsx)(e.span,{className:\"token style\",children:(0,n.jsxs)(e.span,{className:\"token language-css\",children:[\"        \",(0,n.jsx)(e.span,{className:\"token property\",children:\"background-color\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\":\"}),\" \",(0,n.jsx)(e.span,{className:\"token color\",children:\"red\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\";\"}),`\n`]})})}),(0,n.jsx)(e.span,{className:\"code-line\",children:(0,n.jsx)(e.span,{className:\"token style\",children:(0,n.jsxs)(e.span,{className:\"token language-css\",children:[\"      \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"}),`\n`]})})}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token style\",children:(0,n.jsx)(e.span,{className:\"token language-css\",children:\"    \"})}),(0,n.jsxs)(e.span,{className:\"token tag\",children:[(0,n.jsxs)(e.span,{className:\"token tag\",children:[(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"</\"}),\"style\"]}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\">\"})]}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"  \",(0,n.jsxs)(e.span,{className:\"token tag\",children:[(0,n.jsxs)(e.span,{className:\"token tag\",children:[(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"</\"}),\"head\"]}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\">\"})]}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"  \",(0,n.jsxs)(e.span,{className:\"token tag\",children:[(0,n.jsxs)(e.span,{className:\"token tag\",children:[(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"<\"}),\"body\"]}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\">\"})]}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"    \",(0,n.jsxs)(e.span,{className:\"token tag\",children:[(0,n.jsxs)(e.span,{className:\"token tag\",children:[(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"<\"}),\"button\"]}),\" \",(0,n.jsx)(e.span,{className:\"token attr-name\",children:\"id\"}),(0,n.jsxs)(e.span,{className:\"token attr-value\",children:[(0,n.jsx)(e.span,{className:\"token punctuation attr-equals\",children:\"=\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:'\"'}),\"redButton\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:'\"'})]}),\" \",(0,n.jsx)(e.span,{className:\"token attr-name\",children:\"class\"}),(0,n.jsxs)(e.span,{className:\"token attr-value\",children:[(0,n.jsx)(e.span,{className:\"token punctuation attr-equals\",children:\"=\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:'\"'}),\"button regular\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:'\"'})]}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\">\"})]}),\"Regular DOM Element\",(0,n.jsxs)(e.span,{className:\"token tag\",children:[(0,n.jsxs)(e.span,{className:\"token tag\",children:[(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"</\"}),\"button\"]}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\">\"})]}),`\n`]}),(0,n.jsx)(e.span,{className:\"code-line\",children:`\n`}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"    \",(0,n.jsxs)(e.span,{className:\"token tag\",children:[(0,n.jsxs)(e.span,{className:\"token tag\",children:[(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"<\"}),\"script\"]}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\">\"})]}),(0,n.jsx)(e.span,{className:\"token script\",children:(0,n.jsx)(e.span,{className:\"token language-javascript\",children:`\n`})})]}),(0,n.jsx)(e.span,{className:\"code-line\",children:(0,n.jsx)(e.span,{className:\"token script\",children:(0,n.jsxs)(e.span,{className:\"token language-javascript\",children:[\"      \",(0,n.jsx)(e.span,{className:\"token comment\",children:\"// This is a web component\"}),`\n`]})})}),(0,n.jsx)(e.span,{className:\"code-line\",children:(0,n.jsx)(e.span,{className:\"token script\",children:(0,n.jsxs)(e.span,{className:\"token language-javascript\",children:[\"      \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"class\"}),\" \",(0,n.jsx)(e.span,{className:\"token class-name\",children:\"ShadowButton\"}),\" \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"extends\"}),\" \",(0,n.jsx)(e.span,{className:\"token class-name\",children:\"HTMLElement\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),`\n`]})})}),(0,n.jsx)(e.span,{className:\"code-line\",children:(0,n.jsx)(e.span,{className:\"token script\",children:(0,n.jsxs)(e.span,{className:\"token language-javascript\",children:[\"        \",(0,n.jsx)(e.span,{className:\"token function\",children:\"constructor\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),`\n`]})})}),(0,n.jsx)(e.span,{className:\"code-line\",children:(0,n.jsx)(e.span,{className:\"token script\",children:(0,n.jsxs)(e.span,{className:\"token language-javascript\",children:[\"          \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"super\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),`\n`]})})}),(0,n.jsx)(e.span,{className:\"code-line\",children:(0,n.jsx)(e.span,{className:\"token script\",children:(0,n.jsxs)(e.span,{className:\"token language-javascript\",children:[\"          \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"const\"}),\" shadow \",(0,n.jsx)(e.span,{className:\"token operator\",children:\"=\"}),\" \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"this\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token property-access function method\",children:\"attachShadow\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),\" mode\",(0,n.jsx)(e.span,{className:\"token operator\",children:\":\"}),\" \",(0,n.jsx)(e.span,{className:\"token string\",children:\"'open'\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),`\n`]})})}),(0,n.jsx)(e.span,{className:\"code-line\",children:(0,n.jsx)(e.span,{className:\"token script\",children:(0,n.jsx)(e.span,{className:\"token language-javascript\",children:`\n`})})}),(0,n.jsx)(e.span,{className:\"code-line\",children:(0,n.jsx)(e.span,{className:\"token script\",children:(0,n.jsxs)(e.span,{className:\"token language-javascript\",children:[\"          \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"const\"}),\" button \",(0,n.jsx)(e.span,{className:\"token operator\",children:\"=\"}),\" \",(0,n.jsx)(e.span,{className:\"token dom variable\",children:\"document\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token property-access function method\",children:\"createElement\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token string\",children:\"'button'\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),`\n`]})})}),(0,n.jsx)(e.span,{className:\"code-line\",children:(0,n.jsx)(e.span,{className:\"token script\",children:(0,n.jsxs)(e.span,{className:\"token language-javascript\",children:[\"          button\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token property-access function method\",children:\"setAttribute\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token string\",children:\"'id'\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" \",(0,n.jsx)(e.span,{className:\"token string\",children:\"'blueButton'\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),`\n`]})})}),(0,n.jsx)(e.span,{className:\"code-line\",children:(0,n.jsx)(e.span,{className:\"token script\",children:(0,n.jsxs)(e.span,{className:\"token language-javascript\",children:[\"          button\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token property-access function method\",children:\"setAttribute\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token string\",children:\"'class'\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" \",(0,n.jsx)(e.span,{className:\"token string\",children:\"'button shadow'\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),`\n`]})})}),(0,n.jsx)(e.span,{className:\"code-line\",children:(0,n.jsx)(e.span,{className:\"token script\",children:(0,n.jsxs)(e.span,{className:\"token language-javascript\",children:[\"          button\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token property-access function method\",children:\"setAttribute\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),`\n`]})})}),(0,n.jsx)(e.span,{className:\"code-line\",children:(0,n.jsx)(e.span,{className:\"token script\",children:(0,n.jsxs)(e.span,{className:\"token language-javascript\",children:[\"            \",(0,n.jsx)(e.span,{className:\"token string\",children:\"'style'\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),`\n`]})})}),(0,n.jsx)(e.span,{className:\"code-line\",children:(0,n.jsx)(e.span,{className:\"token script\",children:(0,n.jsxs)(e.span,{className:\"token language-javascript\",children:[\"            \",(0,n.jsx)(e.span,{className:\"token string\",children:\"'width: 200px; height: 200px; border: none; color: white; font-size: 16px; font-weight: bold; text-align: center; line-height: 100px; cursor: pointer; margin: 10px;background-color:blue'\"}),`\n`]})})}),(0,n.jsx)(e.span,{className:\"code-line\",children:(0,n.jsx)(e.span,{className:\"token script\",children:(0,n.jsxs)(e.span,{className:\"token language-javascript\",children:[\"          \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),`\n`]})})}),(0,n.jsx)(e.span,{className:\"code-line\",children:(0,n.jsx)(e.span,{className:\"token script\",children:(0,n.jsxs)(e.span,{className:\"token language-javascript\",children:[\"          button\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token property-access\",children:\"textContent\"}),\" \",(0,n.jsx)(e.span,{className:\"token operator\",children:\"=\"}),\" \",(0,n.jsx)(e.span,{className:\"token string\",children:\"'Shadow DOM Element'\"}),`\n`]})})}),(0,n.jsx)(e.span,{className:\"code-line\",children:(0,n.jsx)(e.span,{className:\"token script\",children:(0,n.jsx)(e.span,{className:\"token language-javascript\",children:`\n`})})}),(0,n.jsx)(e.span,{className:\"code-line\",children:(0,n.jsx)(e.span,{className:\"token script\",children:(0,n.jsxs)(e.span,{className:\"token language-javascript\",children:[\"          shadow\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token property-access function method\",children:\"appendChild\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),\"button\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),`\n`]})})}),(0,n.jsx)(e.span,{className:\"code-line\",children:(0,n.jsx)(e.span,{className:\"token script\",children:(0,n.jsxs)(e.span,{className:\"token language-javascript\",children:[\"        \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"}),`\n`]})})}),(0,n.jsx)(e.span,{className:\"code-line\",children:(0,n.jsx)(e.span,{className:\"token script\",children:(0,n.jsxs)(e.span,{className:\"token language-javascript\",children:[\"      \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"}),`\n`]})})}),(0,n.jsx)(e.span,{className:\"code-line\",children:(0,n.jsx)(e.span,{className:\"token script\",children:(0,n.jsx)(e.span,{className:\"token language-javascript\",children:`\n`})})}),(0,n.jsx)(e.span,{className:\"code-line\",children:(0,n.jsx)(e.span,{className:\"token script\",children:(0,n.jsxs)(e.span,{className:\"token language-javascript\",children:[\"      \",(0,n.jsx)(e.span,{className:\"token comment\",children:\"// Register the web component\"}),`\n`]})})}),(0,n.jsx)(e.span,{className:\"code-line\",children:(0,n.jsx)(e.span,{className:\"token script\",children:(0,n.jsxs)(e.span,{className:\"token language-javascript\",children:[\"      customElements\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token property-access function method\",children:\"define\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token string\",children:\"'shadow-button'\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" \",(0,n.jsx)(e.span,{className:\"token maybe-class-name\",children:\"ShadowButton\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),`\n`]})})}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token script\",children:(0,n.jsx)(e.span,{className:\"token language-javascript\",children:\"    \"})}),(0,n.jsxs)(e.span,{className:\"token tag\",children:[(0,n.jsxs)(e.span,{className:\"token tag\",children:[(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"</\"}),\"script\"]}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\">\"})]}),`\n`]}),(0,n.jsx)(e.span,{className:\"code-line\",children:`\n`}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"    \",(0,n.jsxs)(e.span,{className:\"token tag\",children:[(0,n.jsxs)(e.span,{className:\"token tag\",children:[(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"<\"}),\"shadow-button\"]}),\" \",(0,n.jsx)(e.span,{className:\"token attr-name\",children:\"class\"}),(0,n.jsxs)(e.span,{className:\"token attr-value\",children:[(0,n.jsx)(e.span,{className:\"token punctuation attr-equals\",children:\"=\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:'\"'}),\"button shadow\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:'\"'})]}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\">\"})]}),(0,n.jsxs)(e.span,{className:\"token tag\",children:[(0,n.jsxs)(e.span,{className:\"token tag\",children:[(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"</\"}),\"shadow-button\"]}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\">\"})]}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"  \",(0,n.jsxs)(e.span,{className:\"token tag\",children:[(0,n.jsxs)(e.span,{className:\"token tag\",children:[(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"</\"}),\"body\"]}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\">\"})]}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsxs)(e.span,{className:\"token tag\",children:[(0,n.jsxs)(e.span,{className:\"token tag\",children:[(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"</\"}),\"html\"]}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\">\"})]}),`\n`]})]})}),(0,n.jsx)(e.p,{children:\"Everything renders and looks normal, but the issue occurs when you try to select these elements from the DOM.\"}),(0,n.jsx)(e.p,{children:(0,n.jsx)(e.img,{alt:\"shadow dom null\",src:\"https://images.ctfassets.net/on47yk52ubpi/5o3ghfRg5zP7dUKeaurWwS/598bfa2ed296802764d11220d6fa5f56/Screenshot_2023-04-09_at_6.01.39_PM.png\"})}),(0,n.jsx)(\"figure\",{children:(0,n.jsx)(\"figcaption\",{children:\"The blue shadow dom button cannot be found...\"})}),(0,n.jsx)(e.hr,{}),(0,n.jsxs)(e.h2,{id:\"where-does-this-manifest-in-launch\",children:[(0,n.jsx)(e.a,{href:\"#where-does-this-manifest-in-launch\",\"aria-hidden\":\"true\",tabIndex:\"-1\",children:(0,n.jsx)(e.span,{className:\"icon icon-link\"})}),\"Where does this manifest in Launch?\"]}),(0,n.jsx)(e.p,{children:\"I usually run across it when trying to add click tracking to these web components. Just adding a regular Launch click tracking trigger to a rule doesn't work. For example:\"}),(0,n.jsxs)(e.p,{children:[(0,n.jsx)(e.img,{alt:\"blue button rule\",src:\"https://images.ctfassets.net/on47yk52ubpi/1nV1Rgvt2cfP15h2DV68Tv/1cafb4916f1b4a7961ce1f7c1d695430/Screenshot_2023-04-12_at_2.50.50_PM.png\"}),\" \",(0,n.jsx)(e.img,{alt:\"red button rule\",src:\"https://images.ctfassets.net/on47yk52ubpi/6FHE1xLqp5FJgujk02uvHV/f6831c504ec1e3a920331f737dbaddc4/Screenshot_2023-04-12_at_2.58.41_PM.png\"}),\" \",(0,n.jsx)(e.img,{alt:\"button rule gifs\",src:\"https://images.ctfassets.net/on47yk52ubpi/3XcB8JcbV60AfgVTCd3gC7/aa0abdb36005733122ef43be7222c0bf/buttonfires.gif\"})]}),(0,n.jsx)(\"figure\",{children:(0,n.jsx)(\"figcaption\",{children:\"The blue button rule, she no work :(\"})}),(0,n.jsx)(e.hr,{}),(0,n.jsxs)(e.h2,{id:\"workarounds\",children:[(0,n.jsx)(e.a,{href:\"#workarounds\",\"aria-hidden\":\"true\",tabIndex:\"-1\",children:(0,n.jsx)(e.span,{className:\"icon icon-link\"})}),\"Workarounds\"]}),(0,n.jsx)(e.p,{children:\"So there isn't really an out of the box solution for this in Launch. Maybe someone should make an extension \\u{1F914} Anyway, I really only see 2 options:\"}),(0,n.jsxs)(e.ul,{children:[(0,n.jsx)(e.li,{children:\"Build a direct call event or datalayer push into the code that builds the web component\"}),(0,n.jsx)(e.li,{children:\"In Launch custom code, write some custom code that reaches into the shadow root and adds direct call/datalayer push\"})]}),(0,n.jsx)(e.p,{children:\"If anyone knows an out of the box solution - please reach out!\"}),(0,n.jsxs)(e.h2,{id:\"integrating-into-the-web-component\",children:[(0,n.jsx)(e.a,{href:\"#integrating-into-the-web-component\",\"aria-hidden\":\"true\",tabIndex:\"-1\",children:(0,n.jsx)(e.span,{className:\"icon icon-link\"})}),\"Integrating into the web component\"]}),(0,n.jsx)(e.p,{children:\"Although web compoents are special as mentioned above, they are still just regular HTML & JS and thus can have event listeners added to them. Because of this, you can bake a direct call or data layer push event right into an event listener. If I wanted to track clicks on the blue button for example:\"}),(0,n.jsx)(e.pre,{className:\"language-javascript\",children:(0,n.jsxs)(e.code,{className:\"language-javascript code-highlight\",children:[(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token comment\",children:\"// ...\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"button\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token property-access function method\",children:\"addEventListener\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token string\",children:\"'click'\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),\" \",(0,n.jsx)(e.span,{className:\"token operator arrow\",children:\"=>\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"  _satellite\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token property-access function method\",children:\"track\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token string\",children:\"'shadow element click!!!'\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),\" extra\",(0,n.jsx)(e.span,{className:\"token operator\",children:\":\"}),\" \",(0,n.jsx)(e.span,{className:\"token string\",children:\"'data'\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"shadow\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token property-access function method\",children:\"appendChild\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),\"button\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),`\n`]})]})}),(0,n.jsx)(e.p,{children:(0,n.jsx)(e.img,{alt:\"irect call rule\",src:\"https://images.ctfassets.net/on47yk52ubpi/3kolQkxUBmc40YnjYkeSdf/da855cad428f61d079de34e518e27183/bluebuttondirectcall.gif\"})}),(0,n.jsx)(\"figure\",{children:(0,n.jsx)(\"figcaption\",{children:\"I didn't set up a direct call rule, but you get the point, it works\"})}),(0,n.jsx)(e.p,{children:(0,n.jsx)(e.strong,{children:\"or\"})}),(0,n.jsx)(e.pre,{className:\"language-javascript\",children:(0,n.jsxs)(e.code,{className:\"language-javascript code-highlight\",children:[(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token comment\",children:\"// ...\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"button\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token property-access function method\",children:\"addEventListener\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token string\",children:\"'click'\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),\" \",(0,n.jsx)(e.span,{className:\"token operator arrow\",children:\"=>\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"  datalayer\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token property-access function method\",children:\"push\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),\" event\",(0,n.jsx)(e.span,{className:\"token operator\",children:\":\"}),\" \",(0,n.jsx)(e.span,{className:\"token string\",children:\"'shadow element click'\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" extra\",(0,n.jsx)(e.span,{className:\"token operator\",children:\":\"}),\" \",(0,n.jsx)(e.span,{className:\"token string\",children:\"'data'\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"shadow\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token property-access function method\",children:\"appendChild\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),\"button\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),`\n`]})]})}),(0,n.jsx)(e.p,{children:(0,n.jsx)(e.img,{alt:\"data layer push\",src:\"https://images.ctfassets.net/on47yk52ubpi/16vlVePf6QBBgPJqaGtEHJ/99b13a20d58d30c44af3f1ab76f0a320/datalayerpush.gif\"})}),(0,n.jsx)(\"figure\",{children:(0,n.jsx)(\"figcaption\",{children:(0,n.jsx)(e.p,{children:\"I don't have a data layer extension setup on this fake site, but again, you see where I am going with this\"})})}),(0,n.jsx)(e.p,{children:\"There is also the option of adding ADDING YOUR OWN EVENT LISTERN IN CUSTOM CODE!!!!\"}),(0,n.jsx)(e.p,{children:\"So that is how you can add tracking to a shadow root element in the shadow dom. In this case, I added click tracking via an event listener, but if you can write it in Javascript event listener, you can communicate it to Launch. For example, if I wanted to track impressions of the blue button, I could add an intersection observer and fire off direct calls/data layer pushes. Its all about identifying the shadow root element correct.\"}),(0,n.jsx)(e.pre,{className:\"language-javascript\",children:(0,n.jsxs)(e.code,{className:\"language-javascript code-highlight\",children:[(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token comment\",children:\"// Create a new shadow root element\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token comment\",children:\"// const element = document.createElement('div');\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token comment\",children:\"//const shadowRoot = element.attachShadow({ mode: 'open' });\"}),`\n`]}),(0,n.jsx)(e.span,{className:\"code-line\",children:`\n`}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token comment\",children:\"// Create a new Intersection Observer object and observe the shadow root element\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token keyword\",children:\"const\"}),\" observer \",(0,n.jsx)(e.span,{className:\"token operator\",children:\"=\"}),\" \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"new\"}),\" \",(0,n.jsx)(e.span,{className:\"token class-name\",children:\"IntersectionObserver\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"  \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token parameter\",children:\"entries\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),\" \",(0,n.jsx)(e.span,{className:\"token operator arrow\",children:\"=>\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"    \",(0,n.jsx)(e.span,{className:\"token comment\",children:\"// Handle intersection changes here\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"    \",(0,n.jsx)(e.span,{className:\"token keyword control-flow\",children:\"if\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),\"entry\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token property-access\",children:\"isIntersecting\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"      \",(0,n.jsx)(e.span,{className:\"token comment\",children:\"// Fire the custom event on the observed element\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"      entry\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token property-access\",children:\"target\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token property-access function method\",children:\"dispatchEvent\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),\"customEvent\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"    \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"  \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"  \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),\" root\",(0,n.jsx)(e.span,{className:\"token operator\",children:\":\"}),\" shadowRoot \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),`\n`]}),(0,n.jsx)(e.span,{className:\"code-line\",children:`\n`}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token comment\",children:\"// Observe a child element of the shadow root element\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token keyword\",children:\"const\"}),\" targetElement \",(0,n.jsx)(e.span,{className:\"token operator\",children:\"=\"}),\" shadowRoot\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token property-access function method\",children:\"querySelector\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token string\",children:\"'.target'\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"observer\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token property-access function method\",children:\"observe\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),\"targetElement\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),`\n`]})]})}),(0,n.jsx)(e.p,{children:\"IMPRESSION TRACKING IMAGE RULE IN LAUNCH IMPRESSION TRAKCING RULE FIRING\"})]})}}var w=y;return b(v);})();\n;return Component;"
  },
  "_id": "blog/adding-click-tracking-to-shadow-dom-elements.mdx",
  "_raw": {
    "sourceFilePath": "blog/adding-click-tracking-to-shadow-dom-elements.mdx",
    "sourceFileName": "adding-click-tracking-to-shadow-dom-elements.mdx",
    "sourceFileDir": "blog",
    "contentType": "mdx",
    "flattenedPath": "blog/adding-click-tracking-to-shadow-dom-elements"
  },
  "type": "Blog",
  "readingTime": {
    "text": "5 min read",
    "minutes": 4.02,
    "time": 241200,
    "words": 804
  },
  "slug": "adding-click-tracking-to-shadow-dom-elements",
  "toc": [
    {
      "value": "The good ole DOM",
      "url": "#the-good-ole-dom",
      "depth": 2
    },
    {
      "value": "Where does this manifest in Launch?",
      "url": "#where-does-this-manifest-in-launch",
      "depth": 2
    },
    {
      "value": "Workarounds",
      "url": "#workarounds",
      "depth": 2
    },
    {
      "value": "Integrating into the web component",
      "url": "#integrating-into-the-web-component",
      "depth": 2
    }
  ]
}